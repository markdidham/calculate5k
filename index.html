// Alternative Implementation Using Static JavaScript (No Server Required)
// This script can be embedded directly into an HTML file or Google Sites

/**
 * Function to predict 5K time based on VO2 max and gender using refined Jack Daniels' methodology.
 * @param {number} vo2Max - The VO2 max score.
 * @param {string} gender - The gender of the runner ('male' or 'female').
 * @returns {string} - Predicted 5K time in HH:MM:SS format.
 */
function predict5KTime(vo2Max, gender) {
  const GENDER_MULTIPLIER = {
    male: 1.0,
    female: 0.85 // Adjustment for gender performance differences
  };

  // Adjust VO2 max for gender
  const adjustedVO2 = vo2Max * (GENDER_MULTIPLIER[gender.toLowerCase()] || 1.0);

  // Empirical factor for VO2 at 5K pace (VO2 max required for ~3:30 min/km pace)
  const VO2_AT_5K_PACE = 62; // VO2 required for a very fast runner's 5K pace

  // Adjusted ratio for scaling velocity (approximation for typical runners)
  const velocityRatio = adjustedVO2 / VO2_AT_5K_PACE;

  // Elite 5K time (in seconds) at ~3:30 min/km for 5K (1050 seconds or 17:30)
  const elite5KTimeSeconds = 1050;

  // Adjust 5K time based on velocity ratio
  const predictedTimeSeconds = elite5KTimeSeconds / velocityRatio;

  // Convert to HH:MM:SS format
  const hours = Math.floor(predictedTimeSeconds / 3600);
  const minutes = Math.floor((predictedTimeSeconds % 3600) / 60);
  const seconds = Math.round(predictedTimeSeconds % 60);

  return `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
}

// HTML and JavaScript for embedding in a static site or Google Sites
document.write(`
  <div style="font-family: Arial, sans-serif; margin: 20px;">
    <h3>5K Time Predictor</h3>
    <label for="vo2Max">VO2 Max:</label>
    <input type="number" id="vo2Max" placeholder="Enter VO2 Max" step="0.1" style="margin-bottom: 10px;">
    <br>
    <label for="gender">Gender:</label>
    <select id="gender" style="margin-bottom: 10px;">
      <option value="male">Male</option>
      <option value="female">Female</option>
    </select>
    <br>
    <button onclick="calculatePrediction()">Predict 5K Time</button>
    <p id="result" style="margin-top: 20px; font-weight: bold;"></p>
  </div>

  <script>
    function calculatePrediction() {
      const vo2Max = parseFloat(document.getElementById('vo2Max').value);
      const gender = document.getElementById('gender').value;

      if (!vo2Max || !gender) {
        document.getElementById('result').textContent = 'Please provide valid inputs for VO2 Max and gender.';
        return;
      }

      const predictedTime = predict5KTime(vo2Max, gender);
      document.getElementById('result').textContent = `Predicted 5K Time: ${predictedTime}`;
    }
  </script>
`);
